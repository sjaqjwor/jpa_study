## 연관 관계 종류

- 다중성
  - 연관관계가 있는 여러개의 클래스가 있을때 실제로 연관을 가지는 객체를 의미
- 연관관계주인
- 단방향 , 양방향

### 다대일

- 다쪽에 외래키가 있어야한다
- 양방향으로 하고 싶으면 일쪽에 mappedBy추가해서 관계설정 해주면 됨

### 일대다

- 일쪽에서 주인이 되어 일쪽에서 외래키를 가지고 있고 관리한다
- 선호하는 설계가 되지 않을꺼 같음
  - 일대다에 비해 쿼리수가 늘어난다.. 개인적으로 좋아하지 않음
  - 개발자가 관리하기도 힘들꺼 같다.
- 양방향으로 하고 싶으면 일쪽에 mappedBy추가해서 관계설정 해주면 됨
- @JoinColumn필수 안쓰면둘 사이에 연관관계를 위한 조인테이블 사용
- 야매로 일대다 양방향 할 수 있으나 주인이 안되는 쪽에는 @ManyToOne인데 여기에는 mappedBy제공하지 않음
  - @JoinColumn,(insertable=false , updatable=false)를 ManyToOne쪽에 넣어준다... 

### 일대일

- 일대일 관게는 어디에 외래키하든 상관없음
- 외래키가 있는 곳이 주인이고 , 반대편은 mappedBy를 해줘야 한다
- 일대일 양방향일 경우 외래키를 관리하는 주인은 조회할때 lazy가 정상 동작하지만 , 주인이 아닌 앤티티는 lazy가 작동하지 않는다.
  - 프록시에 한개로 주인이 아닌 앤티티는 연관된 주인이 null인지 값이 있는지 알수 없음.. 프록시는 null객체를 감쌀수 없기 때문에 eager로 작동하게 된다.

### 다대다

- 실무에서 쓰지마라
- 관계형 데이터베이스는 정규화된 테이블 2개로 다대다 관계 표현 x
- 연결  ,중간테이블 생성해서 해야한다
- 중간테이블은 단순 연관 정보만 있어서 사실 불필요한 테이블이 되고 , 중간테이블이 있기 때문에 쿼리도 예상 못한 쿼리가 발생할 수 도 있다.

